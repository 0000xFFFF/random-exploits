#include <stdio.h>
#include <windows.h>

#include "debug.h"

int c = 0;

HHOOK keyboardHook;
HHOOK mouseHook;
LRESULT __stdcall KeyboardHookCallback() {
	return 1; // block keyboard
	//return CallNextHookEx(keyboardHook, nCode, wParam, lParam);
}

LRESULT __stdcall MouseHookCallback(int nCode, WPARAM wParam, LPARAM lParam) {
	#if BLOCK_MOUSE
	UNUSED(nCode);
	UNUSED(wParam);
	UNUSED(lParam);
	return 1;
	#else
	return CallNextHookEx(mouseHook, nCode, wParam, lParam);
	#endif
}
	

int main() {
	
	// hooks
	if (!(keyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHookCallback, NULL, 0)))
	{ fprintf(stderr, "ERROR: failed to install keyboard hook\n"); }
	if (!(mouseHook = SetWindowsHookEx(WH_MOUSE_LL, MouseHookCallback, NULL, 0)))
	{ fprintf(stderr, "ERROR: failed to install mouse hook\n");    }
	
	MSG msg;
	while (GetMessage(&msg, NULL, 0, 0)) {
		TranslateMessage(&msg);
		DispatchMessage(&msg);
	}
	
	// unhook
	UnhookWindowsHookEx(keyboardHook);
	UnhookWindowsHookEx(mouseHook);
	
	return msg.wParam;
}